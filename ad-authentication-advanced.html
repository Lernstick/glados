<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/6c734e4f/css/bootstrap.css" rel="stylesheet">
<link href="./assets/be3e053e/solarized_light.css" rel="stylesheet">
<link href="./assets/1f2e89dd/style.css" rel="stylesheet">
<script src="./assets/8261f971/jquery.js"></script>
<script src="./assets/6c734e4f/js/bootstrap.js"></script>
<script src="./assets/93cd64ed/jssearch.js"></script>    <title>Active Directory Authentication (Advanced) - Authentication - GLaDOS Guide</title>
</head>
<body>

<div class="wrap">
    <nav id="w187" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w187-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">GLaDOS Guide</a></div><div id="w187-collapse" class="collapse navbar-collapse"><ul id="w188" class="navbar-nav nav"><li><a href="api/index.html">Class reference</a></li>
<li><a href="./README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-180" data-toggle="collapse" data-parent="#navigation">Howtos and Manuals <b class="caret"></b></a><div id="navigation-180" class="submenu panel-collapse collapse"><a class="list-group-item" href="./create-exam.html">Create an exam</a>
<a class="list-group-item" href="./remote-backup-path.html">Remote Backup Path</a>
<a class="list-group-item" href="./create-zip-exam-file.html">Create a zip-file as exam file</a>
<a class="list-group-item" href="./create-squashfs-exam-file.html">Create a squashfs-filesystem as exam file</a>
<a class="list-group-item" href="./exam-view.html">The exam view</a>
<a class="list-group-item" href="./create-single-ticket.html">Create a single ticket</a>
<a class="list-group-item" href="./create-multiple-tickets.html">Create multiple tickets</a>
<a class="list-group-item" href="./ticket-view.html">The ticket view </a>
<a class="list-group-item" href="./ticket-states.html">Ticket states</a>
<a class="list-group-item" href="./take-exam.html">Taking an Exam</a>
<a class="list-group-item" href="./generate-results.html">Generate results</a>
<a class="list-group-item" href="./correct-exams.html">Correct the exams</a>
<a class="list-group-item" href="./submit-results.html">Submit results back to the student</a>
<a class="list-group-item" href="./get-exam-result.html">Get the exam result as a student</a></div>
<a class="list-group-item" href="#navigation-181" data-toggle="collapse" data-parent="#navigation">Troubleshooting <b class="caret"></b></a><div id="navigation-181" class="submenu panel-collapse collapse"><a class="list-group-item" href="./client-crash.html">Client crashes during exam</a>
<a class="list-group-item" href="./restore-specific-file.html">Restore a specific file</a></div>
<a class="list-group-item" href="#navigation-182" data-toggle="collapse" data-parent="#navigation">Examples <b class="caret"></b></a><div id="navigation-182" class="submenu panel-collapse collapse"><a class="list-group-item" href="./example-exam-essay.html">Example exam: Essay</a></div>
<a class="list-group-item" href="#navigation-183" data-toggle="collapse" data-parent="#navigation">Installation <b class="caret"></b></a><div id="navigation-183" class="submenu panel-collapse collapse"><a class="list-group-item" href="./manual-install.html">Manual Installation</a>
<a class="list-group-item" href="./deb-install.html">Automatic Installation</a></div>
<a class="list-group-item" href="#navigation-184" data-toggle="collapse" data-parent="#navigation">Update and Upgrade <b class="caret"></b></a><div id="navigation-184" class="submenu panel-collapse collapse"><a class="list-group-item" href="./deb-update.html">Softwareupdate on Debian</a>
<a class="list-group-item" href="./deb-8to9-upgrade.html">Upgrade from Debian 8 to 9</a></div>
<a class="list-group-item" href="#navigation-185" data-toggle="collapse" data-parent="#navigation">Configuration <b class="caret"></b></a><div id="navigation-185" class="submenu panel-collapse collapse"><a class="list-group-item" href="./config-files.html">Glados config files</a>
<a class="list-group-item" href="./client-config.html">Exam client configuration</a>
<a class="list-group-item" href="./network-config.html">Network configuration</a></div>
<a class="list-group-item active" href="#navigation-186" data-toggle="collapse" data-parent="#navigation">Authentication <b class="caret"></b></a><div id="navigation-186" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./ldap-authentication.html">LDAP Authentication</a>
<a class="list-group-item" href="./ad-authentication-simple.html">Active Directory Authentication (Simple)</a>
<a class="list-group-item active" href="./ad-authentication-advanced.html">Active Directory Authentication (Advanced)</a>
<a class="list-group-item" href="./test-login.html">Test Login</a>
<a class="list-group-item" href="./user-migration.html">User Migration</a>
<a class="list-group-item" href="./multiple-ldaps.html">Multiple LDAP Servers and/or Active Directories</a>
<a class="list-group-item" href="./auth-placeholders.html">Placeholders</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h2>Active Directory Authentication (Advanced) <span id="active-directory-authentication-advanced"></span><a href="#active-directory-authentication-advanced" class="hashlink">&para;</a></h2><p>This article covers the authentication of users over Active Directory. The advanced setup is very similar to the general LDAP setup, so please first read <a href="ldap-authentication.html">LDAP Authentication</a>.</p>
<h3>Step 1: Choose an authentication type <span id="step-1-choose-an-authentication-type"></span><a href="#step-1-choose-an-authentication-type" class="hashlink">&para;</a></h3><p>When creating a new authentication method, choose <code>Microsoft Active Directory</code> from the dropdown list. In doing so, all special settings are adjusted to Active Directory LDAP.</p>
<h3>Step 2: Setup <span id="step-2-setup"></span><a href="#step-2-setup" class="hashlink">&para;</a></h3><h4>Domain / LDAP URI <span id="domain-ldap-uri"></span><a href="#domain-ldap-uri" class="hashlink">&para;</a></h4><blockquote><p>Please refer to <a href="ldap-authentication.html">LDAP Authentication</a> for more information about these fields.</p>
</blockquote>
<h4>Login Scheme <span id="login-scheme"></span><a href="#login-scheme" class="hashlink">&para;</a></h4><blockquote><p>For more information about the <code>Login Scheme</code> field, please read the article <a href="login-scheme.html">Login Scheme</a> first.</p>
</blockquote>
<h4>Group Mapping <span id="group-mapping"></span><a href="#group-mapping" class="hashlink">&para;</a></h4><blockquote><p>Please refer to <a href="ldap-authentication.html">LDAP Authentication</a> for more information about these fields.</p>
</blockquote>
<h4>Expert Settings <span id="expert-settings"></span><a href="#expert-settings" class="hashlink">&para;</a></h4><h5><strong>Choosing a bind method</strong> <span id="choosing-a-bind-method"></span><a href="#choosing-a-bind-method" class="hashlink">&para;</a></h5><p>As bind <code>Method</code> you can choose between <code>bind directly by the login credentials</code> and <code>bind by given username and password</code>. As for the <code>bind with anonymous user</code> method, you have to explicitly allow this on any Active Directory server. So this is not recommended.</p>
<h6><em>Method 1: Bind directly by the login credentials</em> <span id="method-1-bind-directly-by-the-login-credentials"></span><a href="#method-1-bind-directly-by-the-login-credentials" class="hashlink">&para;</a></h6><p>Active Directory LDAP servers allow the user to bind with both the <code>destinguishedName</code> or the <code>userPrincipalName</code> attribute. Usually the <code>userPrincipalName</code> is the username (<code>sAMAccountName</code>) glued with an <code>@</code> to the AD domain name.</p>
<p>Assume your AD domain name is <code>example.com</code>. Below are a few examples how to set up the authentication method for different outcomes:</p>
<table class="table table-bordered table-striped">
<thead>
<tr><th>Login Scheme			</th><th>Bind Scheme  			</th><th>Example Login			</th><th>Constructed Bind DN </th><th>Authenticated? 	</th><th>Notes 		</th></tr>
</thead>
<tbody>
<tr><td><code>{username}</code>			</td><td><code>{username}@{domain}</code>	</td><td><code>alice</code>				</td><td><code>alice@example.com</code> </td><td>yes				</td><td>default setup</td></tr>
<tr><td><code>{username}</code>			</td><td><code>{username}</code>			</td><td><code>alice</code>				</td><td><code>alice</code>			  </td><td>no 				</td></tr>
<tr><td><code>{username}</code>			</td><td><code>{username}@{domain}</code>	</td><td><code>alice@example.com</code>	</td><td><code>alice@example.com@example.com</code> </td><td>no	</td></tr>
<tr><td><code>{username}@{domain}</code>	</td><td><code>{username}@{domain}</code>	</td><td><code>alice</code>				</td><td>none 				  </td><td>no				</td></tr>
<tr><td><code>{username}@{domain}</code>	</td><td><code>{username}@{domain}</code>	</td><td><code>alice@example.com</code>   </td><td><code>alice@example.com</code> </td><td>yes				</td></tr>
<tr><td><code>{username}@{domain}</code>	</td><td><code>{username}@{domain}</code>	</td><td><code>alice@other_domain</code>  </td><td>none				  </td><td>no				</td></tr>
<tr><td><code>{username}@other_doman</code></td><td><code>{username}@{domain}</code>	</td><td><code>alice@other_domain</code>  </td><td><code>alice@example.com</code> </td><td>yes 			</td><td>rewriting of the domain</td></tr>
<tr><td><code>{username}@other_doman</code></td><td><code>{username}@{domain}</code>	</td><td><code>alice@example.com</code>   </td><td>none 				  </td><td>no  			</td></tr>
</tbody>
</table>
<h6><em>Method 2: Bind anonymously</em> <span id="method-2-bind-anonymously"></span><a href="#method-2-bind-anonymously" class="hashlink">&para;</a></h6><blockquote><p>This method will not work unless you have explicitly allowed this in you AD configuration.</p>
</blockquote>
<h6><em>Method 3: Bind by given username and password</em> <span id="method-3-bind-by-given-username-and-password"></span><a href="#method-3-bind-by-given-username-and-password" class="hashlink">&para;</a></h6><p>For this you have to provide credentials of an account that has the permission to browse the AD directory. The advantage of this method is that only that specific user needs permissions to browse the LDAP directory - the login user itself does not need any permissions.</p>
<p>A common setup could look like this:</p>
<pre><code class="hljs php language-php">loginAttribute = <span class="hljs-string">'mail'</span>;
bindAttribute = <span class="hljs-string">'userPrincipalName'</span>;
</code></pre>
<p>With that configuration, the user is able to login with his/her E-Mail address deposited in the AD directory (this is not default) in the <code>mail</code> attribute.</p>
<blockquote><p>For Active Directory the <code>Bind Attribute</code> can only be either <code>userPrincipalName</code> or <code>distinguishedName</code>.</p>
</blockquote>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Tue, 26 Nov 2019 16:31:21 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
