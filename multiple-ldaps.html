<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/6c734e4f/css/bootstrap.css" rel="stylesheet">
<link href="./assets/be3e053e/solarized_light.css" rel="stylesheet">
<link href="./assets/1f2e89dd/style.css" rel="stylesheet">
<script src="./assets/8261f971/jquery.js"></script>
<script src="./assets/6c734e4f/js/bootstrap.js"></script>
<script src="./assets/93cd64ed/jssearch.js"></script>    <title>Multiple LDAP Servers and/or Active Directories - Authentication - GLaDOS Guide</title>
</head>
<body>

<div class="wrap">
    <nav id="w34" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w34-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">GLaDOS Guide</a></div><div id="w34-collapse" class="collapse navbar-collapse"><ul id="w35" class="navbar-nav nav"><li><a href="api/index.html">Class reference</a></li>
<li><a href="./README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-27" data-toggle="collapse" data-parent="#navigation">Howtos and Manuals <b class="caret"></b></a><div id="navigation-27" class="submenu panel-collapse collapse"><a class="list-group-item" href="./create-exam.html">Create an exam</a>
<a class="list-group-item" href="./remote-backup-path.html">Remote Backup Path</a>
<a class="list-group-item" href="./create-zip-exam-file.html">Create a zip-file as exam file</a>
<a class="list-group-item" href="./create-squashfs-exam-file.html">Create a squashfs-filesystem as exam file</a>
<a class="list-group-item" href="./exam-view.html">The exam view</a>
<a class="list-group-item" href="./create-single-ticket.html">Create a single ticket</a>
<a class="list-group-item" href="./create-multiple-tickets.html">Create multiple tickets</a>
<a class="list-group-item" href="./ticket-view.html">The ticket view </a>
<a class="list-group-item" href="./ticket-states.html">Ticket states</a>
<a class="list-group-item" href="./take-exam.html">Taking an Exam</a>
<a class="list-group-item" href="./generate-results.html">Generate results</a>
<a class="list-group-item" href="./correct-exams.html">Correct the exams</a>
<a class="list-group-item" href="./submit-results.html">Submit results back to the student</a>
<a class="list-group-item" href="./get-exam-result.html">Get the exam result as a student</a></div>
<a class="list-group-item" href="#navigation-28" data-toggle="collapse" data-parent="#navigation">Troubleshooting <b class="caret"></b></a><div id="navigation-28" class="submenu panel-collapse collapse"><a class="list-group-item" href="./client-crash.html">Client crashes during exam</a>
<a class="list-group-item" href="./restore-specific-file.html">Restore a specific file</a></div>
<a class="list-group-item" href="#navigation-29" data-toggle="collapse" data-parent="#navigation">Examples <b class="caret"></b></a><div id="navigation-29" class="submenu panel-collapse collapse"><a class="list-group-item" href="./example-exam-essay.html">Example exam: Essay</a></div>
<a class="list-group-item" href="#navigation-30" data-toggle="collapse" data-parent="#navigation">Installation <b class="caret"></b></a><div id="navigation-30" class="submenu panel-collapse collapse"><a class="list-group-item" href="./manual-install.html">Manual Installation</a>
<a class="list-group-item" href="./deb-install.html">Automatic Installation</a></div>
<a class="list-group-item" href="#navigation-31" data-toggle="collapse" data-parent="#navigation">Update and Upgrade <b class="caret"></b></a><div id="navigation-31" class="submenu panel-collapse collapse"><a class="list-group-item" href="./deb-update.html">Softwareupdate on Debian</a>
<a class="list-group-item" href="./deb-8to9-upgrade.html">Upgrade from Debian 8 to 9</a></div>
<a class="list-group-item" href="#navigation-32" data-toggle="collapse" data-parent="#navigation">Configuration <b class="caret"></b></a><div id="navigation-32" class="submenu panel-collapse collapse"><a class="list-group-item" href="./config-files.html">Glados config files</a>
<a class="list-group-item" href="./client-config.html">Exam client configuration</a>
<a class="list-group-item" href="./network-config.html">Network configuration</a></div>
<a class="list-group-item active" href="#navigation-33" data-toggle="collapse" data-parent="#navigation">Authentication <b class="caret"></b></a><div id="navigation-33" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./ldap-authentication.html">LDAP Authentication</a>
<a class="list-group-item" href="./ad-authentication-simple.html">Active Directory Authentication (Simple)</a>
<a class="list-group-item" href="./ad-authentication-advanced.html">Active Directory Authentication (Advanced)</a>
<a class="list-group-item" href="./test-login.html">Test Login</a>
<a class="list-group-item" href="./user-migration.html">User Migration</a>
<a class="list-group-item active" href="./multiple-ldaps.html">Multiple LDAP Servers and/or Active Directories</a>
<a class="list-group-item" href="./auth-placeholders.html">Placeholders</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h2>Multiple LDAP Servers and/or Active Directories <span id="multiple-ldap-servers-andor-active-directories"></span><a href="#multiple-ldap-servers-andor-active-directories" class="hashlink">&para;</a></h2><p>This article covers the authentication of users over multiple LDAP domains and/or Active Directory domains. You have the possibility to provide as many authentication methods as you want. You can also combine different LDAP servers with different domains.</p>
<p>Under <code>System-&gt;Authentication Methods</code> you see a list of all defined authentication methods in their order of processing. One method is always available: the local database. This entry is neither editable nor deletable and the <code>Login Scheme</code> is fixed. To deal with multiple authentication methods, you have to specify an <code>Order</code> in which they have to be processed during a login. The first item with <code>Order</code> 0 is the local user database maintained by GLaDOS itself. The item with <code>Order</code> 0 is reserved for the local user database.</p>
<blockquote><p>All login attempts will first be authenticated through this local method. This cannot be changed!</p>
</blockquote>
<p>If the authentication fails via local database in any way (username does not exist / password is wrong), the authentication method list will be processed further in the given order. When creating a new authentication method it will automatically be appended to the end of the list. The order can be changed by editing the <code>Order</code> setting of each involved authentication method.</p>
<p>When dealing with multiple authentication methods, you are encouraged to use different <code>Login Schemes</code> for each method. Please read <a href="login-scheme.html">Login Scheme</a> before you start to handle multiple authentication methods.</p>
<h3>Example 1 <span id="example-1"></span><a href="#example-1" class="hashlink">&para;</a></h3><p>Let's have a look at an example. Assume you have two Active Directory domains <code>domain1.local</code> and <code>domain2.local</code> with <code>Order</code> 1 and 2 respectively. There may be usernames that appear in both ADs. You can set up the two authentication methods as follows:</p>
<ul>
<li>The <code>Login Scheme</code> for <code>domain1.local</code> set to <code>{username}@domain1.local</code>.</li>
<li>The <code>Login Scheme</code> for <code>domain2.local</code> set to <code>{username}@domain2.local</code>.</li>
</ul>
<p>Your users can now login via both domains by login with their traditional usernames appended with <code>@domain1.local</code> or <code>@domain2.local</code> depending on to which AD they belong to. If a user happens to exist in both domains with exactly the same username, both users can actually log in by just appending their domain to the username. A login of a user existing in <code>domain1.local</code> may look like this:</p>
<ol>
<li>User types <code>user@domain1.local</code> into the login form</li>
<li>Local login attempt (<code>Order</code> 0)</li>
<li>If it fails, check <code>Login Scheme</code> of <code>domain1.local</code> (<code>Order</code> 1) which matches. Login attempt on <code>domain1.local</code> (<code>Order</code> 1)</li>
<li>If it fails, check <code>Login Scheme</code> of <code>domain2.local</code> (<code>Order</code> 2), but <code>user@domain1.local</code> does not match <code>{username}@domain2.local</code></li>
<li>Further processing next entry (<code>Order</code> 3)</li>
</ol>
<p>A login of a user existing in <code>domain2.local</code>, whould then look like this:</p>
<ol>
<li>User types <code>user@domain2.local</code> into the login form</li>
<li>Local login attempt (<code>Order</code> 0)</li>
<li>If it fails, check <code>Login Scheme</code> of <code>domain1.local</code> (<code>Order</code> 1), but <code>user@domain2.local</code> does not match <code>{username}@domain1.local</code></li>
<li>If it fails, check <code>Login Scheme</code> of <code>domain1.local</code> (<code>Order</code> 1) which matches. Login attempt on <code>domain2.local</code> (<code>Order</code> 2)</li>
<li>Further processing next entry (<code>Order</code> 3)</li>
</ol>
<p>As you can see, the <code>Login Scheme</code> can be used to only authentication users matching a scheme and skip some authentication methods based on that scheme.</p>
<h3>Example 2 <span id="example-2"></span><a href="#example-2" class="hashlink">&para;</a></h3><p>You can also set up the two authentication methods as follows:</p>
<ul>
<li>The <code>Login Scheme</code> for <code>domain1.local</code> set to <code>{username}</code>.</li>
<li>The <code>Login Scheme</code> for <code>domain2.local</code> set to <code>{username}@domain2.local</code>.</li>
</ul>
<p>In this example all users from the AD whose domain name is <code>domain1.local</code>, can log in via their traditional usernames, without and appendix. Users of the domain <code>domain2.local</code> although must append the domain to their usernames.</p>
<h3>Example 3 <span id="example-3"></span><a href="#example-3" class="hashlink">&para;</a></h3><p>You can also set up the two authentication methods as follows:</p>
<ul>
<li>The <code>Login Scheme</code> for <code>domain1.local</code> set to <code>{username}</code>.</li>
<li>The <code>Login Scheme</code> for <code>domain2.local</code> set to <code>{username}</code>.</li>
</ul>
<p>In this example, all users of both domains can login with their traditional usernames, without appendix. But notice that if a user happens to exist in both domains with exactly the same username, it can no longer be distinguished by GLaDOS. If that user is logging in, the authentication flow is as follows:</p>
<ol>
<li>Local login attempt (<code>Order</code> 0)</li>
<li>If it fails, login attempt on <code>domain1.local</code> (<code>Order</code> 1), because it matches the <code>Login Scheme</code> <code>{username}</code></li>
<li>If it fails, login attempt on <code>domain2.local</code> (<code>Order</code> 2), because it matches the <code>Login Scheme</code> <code>{username}</code></li>
<li>If it fails, the login has failed.</li>
</ol>
<p>As you can see, with the <code>Login Scheme</code> configuration option you can route the login flow, when dealing with multiple authentication methods.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Tue, 26 Nov 2019 16:35:01 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
